# Общий заголовок для бутлоадера
01.B0
01 - адрес (любой 0..FF)
B0 - обращение к бутлоадеру

# Чтение списка страниц и их размера

## Запрос
```Java
01.B0.00.CRC
```

## Ответ
Ответ передаётся в текстовом виде, это хорошо для отладки, а перевести в бинарный вид всегда можно успеть
```Java
01.B0.00.
"[
{start: '0x00000000', size: 0x0FFF},
{start: '0x00001000', size: 0x0FFF},
{start: '0x00002000', size: 0x0FFF},
{start: '0x00003000', size: 0x0FFF},
{start: '0x00004000', size: 0x0FFF},
{start: '0x00005000', size: 0x0FFF}
]"
#0.CRC
```

# Передача списка стираемых страниц
## Запрос
```Java
01.B0.01.LL.00000000.00001000.00002000.00003000.CRC
  01 - команда передачи стираемых страниц
  LL - кол-ва 32битных страниц в "пакете"
  00000000 - начальные адреса страниц
  ........   -/-
  00003000   -/-
```
## Ответ (подтверждение, что страницы стёрты)
```Java
01.B0.01.CRC
  01 - получил страници и истёр их
```
# Данный код выполнятеся в цикле 
## Взять из Areas Area - сплошной кусок кода
## Передача стартового адреса сплошного блока кода
### Запрос
```Java
01.B0.02.0800C000.CRC
```
### В случае успеха, в ответе получает размер буфера ОЗУ в байтах
```Java
01.B0.02.00010000.CRC
00010000 - размер буфера в байтах (в данном случае 64К или 65536 байта)
```
Успешное выполнение данного запроса устанавливает указатель для последующего копирования кода во Flash. 
В ответ получаем размер буфера в ОЗУ который доступен Бутлоадеру в контроллере. Чем больше буфер, тем больше кода в него можно загрузить за раз. 

### Передача блока кода
При формировании блока кода, надо ориентироваться на доступный размер буфера в контроллере и стараться загружать его по максимуму.
#### Запрос
```Java
01.B0.03.SIZE.
0000803F0000803F0000803F3763BF42
682FB93E4F3BBC3DC800C80000080004
C800C800C800C8000000C800C8000104
0104010401000000CDCC4C3D00401C46
................................
08010B49
.CRC
```
#### Ответ
##### Блок кода принят
  ```Java
  01.B0.03.CRC
  ```
  Когда блок кода прошёл проверку, код из буфера в ОЗУ копируется во Flash, вместе с этим указатель на Flash получает приращение.
##### Блок кода отвергнут (например не совпала CRC)
```Java
01.B1.03.CRC
```
  В этом случае надо повторно передать блок кода.
# Получение ответа с оставшимся пространством в буфере
